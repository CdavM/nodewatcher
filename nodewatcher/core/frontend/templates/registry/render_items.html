{% load i18n html_tags %}

{% if errors %}
    <div class="alert alert-danger">
      <b>{% trans "Errors while performing validation" %}</b><br/>
      <br/>
      {% for error in errors %}
          {{ error }}<br/>
      {% endfor %}
    </div>
{% endif %}

{% for descriptor in registry_forms %}
    <legend>{{ descriptor.name }}</legend>
    {% if descriptor.multiple %}
        {{ descriptor.submeta }}
        <div id="{{ descriptor.prefix }}_mu_container">
    {% endif %}

    {% for subform in descriptor.subforms %}
       {% if descriptor.multiple and not descriptor.hide_multiple_controls %}
        <div class="registry-item panel panel-default">
            <div class="panel-heading"> &nbsp;
                <button type="button" class="close registry_remove_item" data-index="{{ subform.args.index }}" aria-label="Remove"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="panel-body">
        {% else %}
            <div class="registry-item">
        {% endif %}
            {{ subform }}
       {% if descriptor.multiple and not descriptor.hide_multiple_controls %}
            </div>
        {% endif %}
        </div>
    {% empty %}
        <div class="alert alert-info">
            <div class="registry_nested_empty ui-state-highlight ui-corner-all">{% trans 'This category is currently empty.' %}</div>
        </div>
    {% endfor %}

    {% if descriptor.multiple %}
        {% if not descriptor.hide_multiple_controls %}
        <p class="btn-row">
            <button type="button" class="registry_add_item btn btn-default" data-parent="{{ descriptor.parent_id }}" data-registry-id="{{ descriptor.id }}">
            {% blocktrans with name=descriptor.name %}Add "{{name}}"{% endblocktrans %}
            </button>
        </p>
        {% endif %}
        </div>
    {% endif %}
{% endfor %}
